<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />

  <title>The Phantasmal MUDlib for DGD: Mappings
</title>
  <link href="../../css/default.css" type="text/css" rel="stylesheet" />
</head>

<body>
  <div class="header_pane">
    <p>Phantasmal MUD Lib for DGD</p>

  </div>

  <div class="banner_pane">
    <table class="banner">
  <tr>
    <td class="banner" align="center">
      <a href="http://validator.w3.org/check/referer"><img src=
      "http://www.w3.org/Icons/valid-xhtml10" alt=
      "Valid XHTML 1.0 Strict!" style=
      "border: 0; width: 88px; height: 31px;"/></a> <a href=
      "http://jigsaw.w3.org/css-validator/check/referer"><img src=
      "http://jigsaw.w3.org/css-validator/images/vcss" alt=
      "Valid CSS!" style=
      "border: 0; width: 88px; height: 31px;"></a> <a href=
      "http://sourceforge.net"/></a><img src=
      "http://sourceforge.net/sflogo.php?group_id=48659&amp;type=2"
      style="border: 0; width: 125px; height: 37px;" alt=
      "SourceForge.net Logo"/>
    </td>
  </tr>
</table>

  </div>

  <table>
    <tr>
      <td valign="top" class="index_pane">
        <ul>
<li><a href="../../index.html">Phantasmal Site</a></li>
<ul>
<li><a href="../../History.html">History</a></li>
<li><a href="../../Installing.html">Installing Baseline Phantasmal</a></li>
<li><a href="../../Comparison.html">Comparison to Other Libs</a></li>
<li><a href="../../Credits.html">Credits</a></li>
<li><a href="../../Current.html">Current Features</a></li>
<li><a href="../../WhatIsPhantasmal.html">About</a></li>
<li><a href="../../API/index.html">Phantasmal API</a></li>
<li><a href="../../Archive/index.html">Archive</a></li>
<li><a href="../index.html">DGD</a></li>
<ul>
<li><a href="../Manual/index.html">DGD Reference Manual</a></li>
<li><a href="../CSharp_vs_DGD.html">CSharp vs DGD</a></li>
<li><a href="../Contribute.html">Contributing to DGD</a></li>
<li><a href="../DGD_Terms.html">DGD Glossary</a></li>
<li><a href="../Java_vs_DGD.html">Java vs DGD</a></li>
<li><a href="../MUDs_using_DGD.html">DGD MUDs</a></li>
<li><a href="../Misc_DGD.html">Miscellaneous DGD</a></li>
<li><a href="../MudOS_vs_DGD.html">MudOS vs DGD</a></li>
<li><a href="../SlushBucket.html">Slush Bucket</a></li>
<li><a href="../Why_DGD.html">Why Use DGD?</a></li>
<li><a href="index.html">DGD Reference Manual (legacy)</a></li>
<ul>
<li><a href="ControlFlow.html">Control Flow</a></li>
<li><a href="ControlFlow_ForWhile.html">For and While Loops</a></li>
<li><a href="Introduction.html">Introduction</a></li>
<li><a href="Misc.html">A Miscellany This section consists of various</a></li>
<li><a href="Misc_DGDVersions.html">DGD Version Numbers</a></li>
<li><a href="Misc_EditorQuick.html">DGD Editor Quick Reference</a></li>
<li><a href="Misc_LPCHistory.html">A Brief History of LPC</a></li>
<li><a href="Setup.html">Setting Up DGD</a></li>
<li><a href="Setup_Installing.html">Installing DGD</a></li>
<li><a href="Setup_KernelOverview.html">An Overview of the Kernel Library</a></li>
<li><a href="Setup_RunKernel.html">Running the Kernel Library</a></li>
<li><a href="Tutorial.html">A Quick LPC Tutorial</a></li>
<li><a href="Tutorial_Arguments.html">Arguments and Call-By-Value</a></li>
<li><a href="Tutorial_Arrays.html">Arrays</a></li>
<li><a href="Tutorial_CodeInFiles.html">Making and Using LPC Files</a></li>
<li><a href="Tutorial_Functions.html">Functions</a></li>
<li><a href="Tutorial_GettingStarted.html">Getting Started</a></li>
<li><a href="Tutorial_Loops.html">Looping and Iteration</a></li>
<li>Mappings</li>
<li><a href="Tutorial_Objects.html">Objects</a></li>
<li><a href="Tutorial_StringHandling.html">Simple String Manipulation</a></li>
<li><a href="Tutorial_UserOutput.html">Sending Output to the User</a></li>
<li><a href="Tutorial_VariableScope.html">External Variables and Scope</a></li>
<li><a href="Tutorial_VarsAndExprs.html">Variables and Arithmetic Expressions</a></li>
</ul>
<li><a href="../Config/index.html">Getting DGD</a></li>
<li><a href="../GameDesign/index.html">Game Design Issues</a></li>
<li><a href="../Kernel/index.html">The Kernel Library</a></li>
<li><a href="../LPC/index.html">Untitled document (LPC/index.base.html)</a></li>
<li><a href="../LibWriting/index.html">Writing a Library</a></li>
<li><a href="../Operation/index.html">What Does It Do?</a></li>
<li><a href="../Programming/index.html">DGD LPC Reference</a></li>
<li><a href="../Running/index.html">Running a MUD</a></li>
<li><a href="../Skotos/index.html">Skotos</a></li>
</ul>
<li><a href="../../Design/index.html">Design</a></li>
<li><a href="../../Development/index.html">Development</a></li>
<li><a href="../../Innsmouth/index.html">Innsmouth MUD</a></li>
<li><a href="../../Operation/index.html">Phantasmal Operation</a></li>
<li><a href="../../Setup/index.html">Setup</a></li>
<li><a href="../../Test/index.html">Test module index</a></li>
<li><a href="../../Tutorial/index.html">Phantasmal Tutorials</a></li>
</ul>
</ul>

      </td>
      <td valign="top" class="content_pane">
        <p><a href="index.html">Phantasmal Site</a> > <a href="index.html">DGD</a> > <a href="index.html">DGD Reference Manual (legacy)</a> > Mappings</p>



<h2> 3.8 Mappings </h2>


<p>Mappings are data structures, rather like arrays. An array is a
sequence of values (often numbers). A <dfn>mapping</dfn> is a sort
of dictionary of values, so that you can find a value by looking up
its name, called a <dfn>key</dfn>. You'll see mappings called
<dfn>hash tables</dfn> in some other languages.</p>

<p>Let's say we wanted to look through an array of strings and make
sure there were no repeated elements. Specifically, we wanted to
read through an array and return another array which had no
repeated elements, so every value was unique.</p>
<pre>
string *unique(string *array) {
  mapping elements;
  int     ctr;

  elements = ([ ]);
  for(ctr = 0; ctr &lt; sizeof(array); ctr++) {
    elements[array[ctr]] = 1;
  }

  return map_indices(elements);
}
</pre>

<p>Notice that <var>mapping</var> is used like <var>int</var> to
declare variables. Notice also that we have to initialize the
mapping to a new empty value before we assign anything to it.</p>

<p>A mapping in LPC is written almost, but not quite, like an
array. The mapping <code>([ "a" : 1, "b" : 2, "c" : 3 ])</code> can
be dereferenced like an array. But instead of dereferencing by
number, this mapping is dereferenced by name. So if a mapping
called <var>letters</var> had that value, then
<code>letters["a"]</code> would have the value 1 and
<code>letters["c"]</code> would have the value 3. <code>([
])</code> is a fresh new empty mapping &mdash; there are no keys or
values at all in it.</p>

<p>Try compiling a new <tt>/usr/admin/myobj.c</tt> with the
function above in it. This can be instead of the old function, or
in addition to it. Once you've successfully compiled
<tt>myobj.c</tt>, try typing <kbd>"/usr/admin/myobj"-&gt;unique( ({
"bob", "sam", "murray", "bob" }) )</kbd>. You should get a result
like <samp>$45 = ({ "bob", "murray", "sam" })</samp>. The result
contains all the same strings as the original, but in a different
order, and with no repeated "bob". You've just called your function
on the object, but you didn't use quite the same syntax you've been
using. Instead, you used the object's name in double quotes. The
object's name is the same as the filename, but without the
<tt>.c</tt> on the end.</p>

<p>The function first makes a new, empty mapping, and then puts
each element of the array into it as a <dfn>key</dfn>, also called
an <dfn>index</dfn>. It assigns the value 1 to each key, though the
value won't actually be used. Any repeated array elements will just
assign 1 to the same key that's already in the array. Then, at the
end, we call a function called map_indices which returns an array
of the indices (keys) of the mapping, in alphabetical
order.</p>


<table style="width: 100%; border: 1px">
  <tr>

    <td><a href="Tutorial_Arrays.html"> &lt;&mdash; Prev<br /> Arrays </a></td>

    <td align="center"><a href="Tutorial.html"> Up<br /> A Quick LPC Tutorial </a></td>

    <td align="right"><a href="Tutorial_Functions.html"> Next &mdash;&gt; <br />Functions </a></td>
  </tr>
</table>

      </td>
    </tr>
  </table>

  <div class="footer_pane">
    <p>Copyright (C) 2010 Raymond Jennings</p>
<p>This website is released to the public under the terms of the
GNU Free Documentation License, Version 1.3 or later</p>

  </div>
</body>
</html>
