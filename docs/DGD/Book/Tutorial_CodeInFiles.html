<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />

  <title>The Phantasmal MUDlib for DGD: Making and Using LPC Files
</title>
  <link href="../../css/default.css" type="text/css" rel="stylesheet" />
</head>

<body>
  <div class="header_pane">
    <p>Phantasmal MUD Lib for DGD</p>

  </div>

  <div class="banner_pane">
    <table class="banner">
  <tr>
    <td class="banner" align="center">
      <a href="http://validator.w3.org/check/referer"><img src=
      "http://www.w3.org/Icons/valid-xhtml10" alt=
      "Valid XHTML 1.0 Strict!" style=
      "border: 0; width: 88px; height: 31px;"/></a> <a href=
      "http://jigsaw.w3.org/css-validator/check/referer"><img src=
      "http://jigsaw.w3.org/css-validator/images/vcss" alt=
      "Valid CSS!" style=
      "border: 0; width: 88px; height: 31px;"></a> <a href=
      "http://sourceforge.net"/></a><img src=
      "http://sourceforge.net/sflogo.php?group_id=48659&amp;type=2"
      style="border: 0; width: 125px; height: 37px;" alt=
      "SourceForge.net Logo"/>
    </td>
  </tr>
</table>

  </div>

  <table>
    <tr>
      <td valign="top" class="index_pane">
        <ul>
<li><a href="../../index.html">Phantasmal Site</a></li>
<ul>
<li><a href="../../History.html">History</a></li>
<li><a href="../../Installing.html">Installing Baseline Phantasmal</a></li>
<li><a href="../../Comparison.html">Comparison to Other Libs</a></li>
<li><a href="../../Credits.html">Credits</a></li>
<li><a href="../../Current.html">Current Features</a></li>
<li><a href="../../WhatIsPhantasmal.html">About</a></li>
<li><a href="../../API/index.html">Phantasmal API</a></li>
<li><a href="../../Archive/index.html">Archive</a></li>
<li><a href="../index.html">DGD</a></li>
<ul>
<li><a href="../Manual/index.html">DGD Reference Manual</a></li>
<li><a href="../CSharp_vs_DGD.html">CSharp vs DGD</a></li>
<li><a href="../Contribute.html">Contributing to DGD</a></li>
<li><a href="../DGD_Terms.html">DGD Glossary</a></li>
<li><a href="../Java_vs_DGD.html">Java vs DGD</a></li>
<li><a href="../MUDs_using_DGD.html">DGD MUDs</a></li>
<li><a href="../Misc_DGD.html">Miscellaneous DGD</a></li>
<li><a href="../MudOS_vs_DGD.html">MudOS vs DGD</a></li>
<li><a href="../SlushBucket.html">Slush Bucket</a></li>
<li><a href="../Why_DGD.html">Why Use DGD?</a></li>
<li><a href="index.html">DGD Reference Manual (legacy)</a></li>
<ul>
<li><a href="ControlFlow.html">Control Flow</a></li>
<li><a href="ControlFlow_ForWhile.html">For and While Loops</a></li>
<li><a href="Introduction.html">Introduction</a></li>
<li><a href="Misc.html">A Miscellany This section consists of various</a></li>
<li><a href="Misc_DGDVersions.html">DGD Version Numbers</a></li>
<li><a href="Misc_EditorQuick.html">DGD Editor Quick Reference</a></li>
<li><a href="Misc_LPCHistory.html">A Brief History of LPC</a></li>
<li><a href="Setup.html">Setting Up DGD</a></li>
<li><a href="Setup_Installing.html">Installing DGD</a></li>
<li><a href="Setup_KernelOverview.html">An Overview of the Kernel Library</a></li>
<li><a href="Setup_RunKernel.html">Running the Kernel Library</a></li>
<li><a href="Tutorial.html">A Quick LPC Tutorial</a></li>
<li><a href="Tutorial_Arguments.html">Arguments and Call-By-Value</a></li>
<li><a href="Tutorial_Arrays.html">Arrays</a></li>
<li>Making and Using LPC Files</li>
<li><a href="Tutorial_Functions.html">Functions</a></li>
<li><a href="Tutorial_GettingStarted.html">Getting Started</a></li>
<li><a href="Tutorial_Loops.html">Looping and Iteration</a></li>
<li><a href="Tutorial_Mappings.html">Mappings</a></li>
<li><a href="Tutorial_Objects.html">Objects</a></li>
<li><a href="Tutorial_StringHandling.html">Simple String Manipulation</a></li>
<li><a href="Tutorial_UserOutput.html">Sending Output to the User</a></li>
<li><a href="Tutorial_VariableScope.html">External Variables and Scope</a></li>
<li><a href="Tutorial_VarsAndExprs.html">Variables and Arithmetic Expressions</a></li>
</ul>
<li><a href="../Config/index.html">Getting DGD</a></li>
<li><a href="../GameDesign/index.html">Game Design Issues</a></li>
<li><a href="../Kernel/index.html">The Kernel Library</a></li>
<li><a href="../LPC/index.html">Untitled document (LPC/index.base.html)</a></li>
<li><a href="../LibWriting/index.html">Writing a Library</a></li>
<li><a href="../Operation/index.html">What Does It Do?</a></li>
<li><a href="../Programming/index.html">DGD LPC Reference</a></li>
<li><a href="../Running/index.html">Running a MUD</a></li>
<li><a href="../Skotos/index.html">Skotos</a></li>
</ul>
<li><a href="../../Design/index.html">Design</a></li>
<li><a href="../../Development/index.html">Development</a></li>
<li><a href="../../Innsmouth/index.html">Innsmouth MUD</a></li>
<li><a href="../../Operation/index.html">Phantasmal Operation</a></li>
<li><a href="../../Setup/index.html">Setup</a></li>
<li><a href="../../Test/index.html">Test module index</a></li>
<li><a href="../../Tutorial/index.html">Phantasmal Tutorials</a></li>
</ul>
</ul>

      </td>
      <td valign="top" class="content_pane">
        <p><a href="index.html">Phantasmal Site</a> > <a href="index.html">DGD</a> > <a href="index.html">DGD Reference Manual (legacy)</a> > Making and Using LPC Files</p>



<h2> 3.6 Making and Using LPC Files </h2>


<p>You may be getting pretty tired of the code command by now. Even
if you're not, you're probably starting to understand why we don't
use it for big programs. Retyping all that stuff can get ugly.
Typos are difficult to correct if you're retyping everything. And
the code would certainly <em>look</em> better if it could be
formatted properly.</p>

<p>To start using LPC files, you'll first need to be able to edit
text files somehow. That means you'll need an <dfn>editing
program</dfn>, or <dfn>editor</dfn>.</p>

<p>Since you're running your own copy of DGD, the easiest way for
you to edit files is to use an editing program that's on your
desktop. While it's possible to use the <a href=
"Misc_EditorQuick.html">built-in DGD editor</a>, it's probably
easier not to. The built-in one isn't a very good editor by modern
standards, and it's hard to use if you're used to normal desktop
editing programs.</p>

<p>On Unix, whatever editor you've already got will almost
certainly do. On Windows, however, you'll need to be careful
because most editors put Windows-style line breaks into text files.
DGD requires Unix-style line breaks in its text files. If you don't
know what line breaks are, don't worry too much, but <em>do</em>
follow the instructions here anyway. TextPad is a freely available
Win32 editor that will handle line breaks properly. There are also
versions of emacs and vi for Windows, and either will work. I don't
know the situation on Macintosh computers, so I don't know what
editors are available that will handle non-native line breaks.</p>

<p>It's useful to know what the code command does so you can get
your code to work similarly. The code command makes a new object
from a file every time you use it. That file looks something like
this:</p>
<pre>
#include &lt;float.h&gt;
#include &lt;limits.h&gt;
#include &lt;status.h&gt;
#include &lt;trace.h&gt;
#include &lt;type.h&gt;

/* The exec() function, from the code command */
mixed exec(object user, mixed argv...) {
    mixed a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;

    &lt;Your Code&gt;
}
</pre>

<p>It's actually a little more complicated than that &mdash; for
instance, a <code>return</code> statement is added before your code
if that code doesn't end with a semicolon or end-curly-brace. Also,
your code has all the history references turned into something more
palatable. The history variables aren't part of DGD's dialect of
LPC. They're only part of the Kernel Library.</p>

<p>To create the LPC file, you'll need to use your editor to create
a file called <tt>/usr/admin/myobj.c</tt>. Note that that filename
is relative to the directory of the Kernel Library, so if you
installed DGD in <tt>C:\DGD</tt>, you'll need to make the file
<tt>C:\DGD\mud\usr\admin\myobj.c</tt>. If you installed dgd in
<tt>/home/bob/dgd</tt>, you'll need to make the file
<tt>/home/bob/dgd/mud/usr/admin/myobj.c</tt>.</p>

<p>You should make an LPC file exactly like the above, except that
where it says "&lt;Your Code&gt;", you should substitute
<code>return 7;</code>. That way, the test object will return the
number 7 when you call its function. So you'll have created the
object that the Kernel Library would create internally if you used
the command <kbd>code 7</kbd>.</p>

<p>Now you'll need to compile the object. To do that from the admin
user's command line you'll want to type <kbd>compile
/usr/admin/myobj.c</kbd>. You may just be able to type <kbd>compile
myobj.c</kbd> for the same result &mdash; use the <kbd>pwd</kbd>
command to make sure you're in the <tt>/usr/admin</tt>
directory.</p>

<p>In either case, you should see a result like <samp>$15 =
&lt;/usr/admin/myobj&gt;</samp>. If you get errors instead then
your code isn't quite right or there's something wrong with the
file (did you use the right name?). Look at both again carefully.
If DGD can't find the file, then perhaps you didn't put it in the
right place, or perhaps you didn't type the "compile" line
perfectly. Check them both again. Try it until you get the result
above.</p>

<p>Once you have, you've made a usable object. To call a function
on it, you'll want to use its history entry. This command line will
assume that the object was $15 (as in the paragraph above). If
yours was a different history number, you should substitute your
own number. Type <kbd>code $15-&gt;exec(this_user())</kbd>. You
should get a result like <samp>$16 = 7</samp>. You've successfully
returned the number 7. Success!</p>

<p>Go back and look at the code again. You may have realized that
the long line starting with <var>mixed</var> declares all those
single-letter variables I mentioned earlier. <code>Mixed</code>
declares a variable, just as <var>int</var> and <var>float</var>
do. A <var>mixed</var> variable can hold any DGD type. You
<em>could</em> just make all of your variables mixed rather than
bothering with all the different types. But there are some serious
disadvantages to doing that, as we'll discuss later on.</p>

<p>DGD doesn't actually have magic variables that are available
everywhere called 'c' and 'f' and so on. The code command provides
them. But in a regular LPC file, you'll have to declare them if you
want to use them. Constants like <var>ST_VERSION</var> aren't
really part of the language either. The code command has them
because of the <code>#include</code> directives at the start of the
source file. In your own code, you'll need to specifically include
the files for any constants you may wish to use. So if you want to
use <var>ST_VERSION</var>, you'll need to include status.h from
your LPC object.</p>

<p>There's also a weird line starting with <code>/*</code> and
ending with <code>*/</code>. That line is called a
<dfn>comment</dfn>, and it's designed to let other programmers know
things about your code. It has no effect, so you can
<em>comment</em> on your own code, to humans only. A comment is
allowed to span multiple lines, or it can cover only part of a
single line.. It goes from the <code>/*</code> to the
<code>*/</code>, whether that's only part of a line, or pages and
pages.</p>

<p>We'll cover more about the specifics of myobj.c and what we mean
by a function later on. We'll cover more about what the "code"
command to call it actually did. However, in the mean time, you
have a good simple way to store your code and make modifications to
it instead of retyping the whole thing every time. That'll be
useful for longer bits of code like what you typed in the <a href=
"Tutorial_Loops.html">Loops and Looping</a> section.</p>


<table style="width: 100%; border: 1px">
  <tr>

    <td><a href="Tutorial_UserOutput.html"> &lt;&mdash; Prev<br /> Sending Output to the User </a></td>

    <td align="center"><a href="Tutorial.html"> Up<br /> A Quick LPC Tutorial </a></td>

    <td align="right"><a href="Tutorial_Arrays.html"> Next &mdash;&gt; <br />Arrays </a></td>
  </tr>
</table>

      </td>
    </tr>
  </table>

  <div class="footer_pane">
    <p>Copyright (C) 2010 Raymond Jennings</p>
<p>This website is released to the public under the terms of the
GNU Free Documentation License, Version 1.3 or later</p>

  </div>
</body>
</html>
